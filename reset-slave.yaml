- job-template:
    name: 'reset-iscsi-slave'
    node: '{node}'

    quiet-period: 0

    builders:
      - shell: |
          #!/bin/bash -xe
          
          echo "Start reset iscsi slave"
          sudo python /home/ift/Documents/reset_script/reset.py
          sudo java -jar /home/ift/Documents/reset_script/raidcmd_ESDS10.jar 10.10.10.200 reset controller -y          
          sudo shutdown -r +1          
          sleep 60 # This line should be changed to use Groovy script below
                   #   import groovy.transform.Synchronized
                   #   sleep(65000)

- job-template:
    name: 'reset-fc-slave'
    node: '{node}'

    quiet-period: 0

    builders:
      - shell: |
          #!/bin/bash -xe

          echo "Start reset fc slave"
          sudo python /home/ift/Documents/reset_script/reset.py
          sudo java -jar /home/ift/Documents/reset_script/raidcmd_ESDS10.jar 10.10.10.200 reset controller -y
          sudo shutdown -r +1
          sleep 60 # This line should be changed to use Groovy script below
                   #   import groovy.transform.Synchronized
                   #   sleep(65000)
- job-template:
    name: 'wait-reset-iscsi-slave'
    node: '{node}'

    quiet-period: 0

    builders:
      - shell: |
          #!/bin/bash -xe
          
          echo "resetting iscsi slave"
          sleep 65
          # This line should be changed to use Groovy script below
          #   import groovy.transform.Synchronized
          #   sleep(65000)

- job-template:
    name: 'wait-reset-fc-slave'
    node: '{node}'

    quiet-period: 0

    builders:
      - shell: |
          #!/bin/bash -xe

          echo "resetting fc slave"
          sleep 65
          # This line should be changed to use Groovy script below
          #   import groovy.transform.Synchronized
          #   sleep(65000)
